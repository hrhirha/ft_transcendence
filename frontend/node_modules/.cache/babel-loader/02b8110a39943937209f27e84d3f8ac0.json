{"ast":null,"code":"var _jsxFileName = \"/Users/abahdir/Desktop/ft_transcendence/frontend/src/views/components/check_auth/auth_checker.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { get_me } from \"../../../controller/user/user\";\nimport { NavBar } from \"../navbar/navbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AuthChecker = _ref => {\n  _s();\n\n  let {\n    wrappedContent,\n    redirect\n  } = _ref;\n  const navigator = useNavigate();\n  const location = useLocation();\n  const [go, setGo] = useState(false);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    (async function anyNameFunction() {\n      try {\n        const me = await get_me();\n        setUser(me);\n        if (location.pathname != redirect) navigator(redirect);\n      } catch (err) {\n        if (location.pathname != \"/login\") navigator(\"/login\");\n      }\n\n      setGo(true);\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [go && location.pathname != \"/login\" && /*#__PURE__*/_jsxDEV(NavBar, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 51\n    }, this), go && wrappedContent]\n  }, void 0, true);\n};\n\n_s(AuthChecker, \"5ijAw/rkloYxai3GxN6+vsATf8s=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = AuthChecker;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthChecker\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","get_me","NavBar","AuthChecker","wrappedContent","redirect","navigator","location","go","setGo","user","setUser","anyNameFunction","me","pathname","err"],"sources":["/Users/abahdir/Desktop/ft_transcendence/frontend/src/views/components/check_auth/auth_checker.tsx"],"sourcesContent":["import { AxiosError } from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { get_me, user_infos } from \"../../../controller/user/user\";\nimport { NavBar } from \"../navbar/navbar\";\n\nexport const AuthChecker:React.FC<{wrappedContent: React.ReactNode, redirect: string}> = ({wrappedContent, redirect}) => {\n    const navigator = useNavigate();\n    const location = useLocation();\n    const [go, setGo] = useState<boolean>(false);\n    const [user, setUser] = useState<any>(null);\n    useEffect(() =>  {\n        (async function anyNameFunction() {\n            try {\n                const me: user_infos = await get_me();\n                setUser(me);\n                if (location.pathname != redirect)\n                    navigator(redirect);\n            }\n            catch(err: AxiosError | any) {\n                if (location.pathname != \"/login\")\n                    navigator(\"/login\");\n            }\n            setGo(true);\n        })();\n    }, []);\n\n    return (<>\n        {go && (location.pathname != \"/login\") && <NavBar user={user}/>}\n        {go && wrappedContent}\n    </>);\n}"],"mappings":";;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,kBAAzC;AACA,SAASC,MAAT,QAAmC,+BAAnC;AACA,SAASC,MAAT,QAAuB,kBAAvB;;;AAEA,OAAO,MAAMC,WAAyE,GAAG,QAAgC;EAAA;;EAAA,IAA/B;IAACC,cAAD;IAAiBC;EAAjB,CAA+B;EACrH,MAAMC,SAAS,GAAGN,WAAW,EAA7B;EACA,MAAMO,QAAQ,GAAGR,WAAW,EAA5B;EACA,MAAM,CAACS,EAAD,EAAKC,KAAL,IAAcX,QAAQ,CAAU,KAAV,CAA5B;EACA,MAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAM,IAAN,CAAhC;EACAD,SAAS,CAAC,MAAO;IACb,CAAC,eAAee,eAAf,GAAiC;MAC9B,IAAI;QACA,MAAMC,EAAc,GAAG,MAAMZ,MAAM,EAAnC;QACAU,OAAO,CAACE,EAAD,CAAP;QACA,IAAIN,QAAQ,CAACO,QAAT,IAAqBT,QAAzB,EACIC,SAAS,CAACD,QAAD,CAAT;MACP,CALD,CAMA,OAAMU,GAAN,EAA6B;QACzB,IAAIR,QAAQ,CAACO,QAAT,IAAqB,QAAzB,EACIR,SAAS,CAAC,QAAD,CAAT;MACP;;MACDG,KAAK,CAAC,IAAD,CAAL;IACH,CAZD;EAaH,CAdQ,EAcN,EAdM,CAAT;EAgBA,oBAAQ;IAAA,WACHD,EAAE,IAAKD,QAAQ,CAACO,QAAT,IAAqB,QAA5B,iBAAyC,QAAC,MAAD;MAAQ,IAAI,EAAEJ;IAAd;MAAA;MAAA;MAAA;IAAA,QADtC,EAEHF,EAAE,IAAIJ,cAFH;EAAA,gBAAR;AAIH,CAzBM;;GAAMD,W;UACSH,W,EACDD,W;;;KAFRI,W"},"metadata":{},"sourceType":"module"}